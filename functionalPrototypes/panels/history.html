
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quote History</title>
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #fef6f9;
      color: #2c2c2c;
      padding: 20px;
    }

    .history-container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .page-header {
      margin-bottom: 40px;
    }

    h2 {
      color: #355070;
      font-size: 32px;
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }

    .page-subtitle {
      color: #666;
      font-size: 16px;
    }

    .stats-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }

    .stat-card {
      background: white;
      border-radius: 12px;
      padding: 20px;
      border: 2px solid #e8c4d8;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      transition: all 0.3s ease;
    }

    .stat-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 4px 12px rgba(186, 132, 168, 0.2);
    }

    .stat-header {
      display: flex;
      align-items: center;
      gap: 10px;
      color: #ba84a8;
      margin-bottom: 10px;
      font-size: 14px;
      font-weight: 600;
    }

    .stat-value {
      font-size: 32px;
      font-weight: 700;
      color: #355070;
    }

    .quotes-list {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .quote-card {
      background: white;
      border-radius: 16px;
      padding: 25px;
      border: 2px solid #e8c4d8;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      transition: all 0.3s ease;
    }

    .quote-card:hover {
      box-shadow: 0 4px 16px rgba(186, 132, 168, 0.15);
    }

    .quote-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 20px;
      flex-wrap: wrap;
      gap: 15px;
    }

    .quote-title {
      flex: 1;
    }

    .quote-id {
      color: #355070;
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 5px;
    }

    .quote-date {
      color: #666;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .status-badge {
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .status-pending {
      background: #fff3cd;
      color: #856404;
      border: 2px solid #ffc107;
    }

    .status-approved {
      background: #d4edda;
      color: #155724;
      border: 2px solid #28a745;
    }

    .status-rejected {
      background: #f8d7da;
      color: #721c24;
      border: 2px solid #dc3545;
    }

    .quote-details {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
      padding: 20px;
      background: #fef6f9;
      border-radius: 12px;
    }

    .detail-item {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .detail-label {
      color: #ba84a8;
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .detail-value {
      color: #355070;
      font-size: 15px;
      font-weight: 600;
    }

    .products-section {
      margin-bottom: 20px;
    }

    .products-header {
      color: #355070;
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .product-list {
      background: white;
      border: 2px solid #e8c4d8;
      border-radius: 12px;
      overflow: hidden;
    }

    .product-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      border-bottom: 1px solid #e8c4d8;
    }

    .product-item:last-child {
      border-bottom: none;
    }

    .product-info {
      flex: 1;
    }

    .product-name {
      color: #355070;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .product-quantity {
      color: #666;
      font-size: 14px;
    }

    .product-price {
      color: #ba84a8;
      font-weight: 700;
      font-size: 16px;
      text-align: right;
    }

    .quote-total {
      background: linear-gradient(135deg, #355070 0%, #4a6a8a 100%);
      color: white;
      padding: 20px;
      border-radius: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .total-label {
      font-size: 16px;
      font-weight: 600;
    }

    .total-amount {
      font-size: 28px;
      font-weight: 700;
    }

    .quote-actions {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s ease;
    }

    .btn-primary {
      background: #ba84a8;
      color: white;
    }

    .btn-primary:hover {
      background: #a16f91;
      transform: translateY(-2px);
    }

    .btn-secondary {
      background: white;
      color: #355070;
      border: 2px solid #e8c4d8;
    }

    .btn-secondary:hover {
      background: #fef6f9;
      border-color: #ba84a8;
    }

    .empty-state {
      text-align: center;
      padding: 60px 20px;
      background: white;
      border-radius: 16px;
      border: 2px dashed #e8c4d8;
    }

    .empty-state i {
      color: #ba84a8;
      margin-bottom: 20px;
    }

    .empty-state h3 {
      color: #355070;
      font-size: 24px;
      margin-bottom: 10px;
    }

    .empty-state p {
      color: #666;
      margin-bottom: 20px;
    }

    .notes-section {
      background: #fff3cd;
      border: 2px solid #ffc107;
      border-radius: 8px;
      padding: 15px;
      margin-top: 15px;
    }

    .notes-header {
      color: #856404;
      font-weight: 600;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
    }

    .notes-content {
      color: #856404;
      font-size: 14px;
      line-height: 1.5;
    }

    .edit-modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      backdrop-filter: blur(4px);
    }

    .edit-modal.show {
      display: block;
    }

    .edit-modal-content {
      background-color: white;
      margin: 5% auto;
      border-radius: 20px;
      width: 90%;
      max-width: 600px;
      max-height: 85vh;
      overflow-y: auto;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      animation: slideIn 0.3s ease;
    }

    .edit-modal-content::-webkit-scrollbar {
      width: 8px;
    }

    .edit-modal-content::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 10px;
    }

    .edit-modal-content::-webkit-scrollbar-thumb {
      background: #ba84a8;
      border-radius: 10px;
    }

    .edit-modal-content::-webkit-scrollbar-thumb:hover {
      background: #a16f91;
    }

    @keyframes slideIn {
      from { transform: translateY(-50px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .edit-modal-header {
      background: linear-gradient(135deg, #ba84a8 0%, #e8c4d8 100%);
      padding: 25px 30px;
      border-radius: 20px 20px 0 0;
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .edit-modal-header h3 {
      font-size: 24px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .edit-modal-body {
      padding: 30px;
    }

    .edit-form-group {
      margin-bottom: 20px;
    }

    .edit-form-group label {
      display: block;
      color: #355070;
      font-weight: 600;
      margin-bottom: 6px;
      font-size: 14px;
    }

    .edit-form-group input,
    .edit-form-group textarea {
      width: 100%;
      padding: 12px;
      border: 2px solid #e8c4d8;
      border-radius: 8px;
      font-size: 14px;
      font-family: inherit;
    }

    .edit-form-group input:focus,
    .edit-form-group textarea:focus {
      border-color: #ba84a8;
      outline: none;
    }

    .btn-save {
      background-color: #355070;
      color: white;
      padding: 14px 30px;
      border: none;
      border-radius: 10px;
      font-weight: 600;
      font-size: 16px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      width: 100%;
      transition: all 0.3s ease;
    }

    .btn-save:hover {
      background-color: #2a4059;
    }

    @media (max-width: 768px) {
      .quote-header {
        flex-direction: column;
      }

      .quote-details {
        grid-template-columns: 1fr;
      }

      .product-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }

      .product-price {
        text-align: left;
      }

      .quote-actions {
        flex-direction: column;
      }

      .btn {
        width: 100%;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <div class="history-container">
    <div class="page-header">
      <h2>
        <i data-lucide="history"></i>
        Quote History
      </h2>
      <p class="page-subtitle">View and manage all your quote requests</p>
    </div>

    <!-- Statistics Cards -->
    <div class="stats-cards">
      <div class="stat-card">
        <div class="stat-header">
          <i data-lucide="file-text"></i>
          Total Quotes
        </div>
        <div class="stat-value">2</div>
      </div>
      <div class="stat-card">
        <div class="stat-header">
          <i data-lucide="clock"></i>
          Pending
        </div>
        <div class="stat-value">1</div>
      </div>
      <div class="stat-card">
        <div class="stat-header">
          <i data-lucide="check-circle"></i>
          Approved
        </div>
        <div class="stat-value">1</div>
      </div>
      <div class="stat-card">
        <div class="stat-header">
          <i data-lucide="dollar-sign"></i>
          Total Estimated
        </div>
        <div class="stat-value">$644.00</div>
      </div>
    </div>

    <!-- Quotes List -->
    <div class="quotes-list" id="quotesList">
      
      <!-- Quote 1 - Approved -->
      <div class="quote-card">
        <div class="quote-header">
          <div class="quote-title">
            <div class="quote-id">Quote #QT-2024-001</div>
            <div class="quote-date">
              <i data-lucide="calendar"></i>
              Requested on October 15, 2024
            </div>
          </div>
          <span class="status-badge status-approved">
            <i data-lucide="check-circle"></i>
            Approved
          </span>
        </div>

        <div class="quote-details">
          <div class="detail-item">
            <div class="detail-label">
              <i data-lucide="calendar"></i>
              Event Date
            </div>
            <div class="detail-value">November 25, 2024</div>
          </div>
          <div class="detail-item">
            <div class="detail-label">
              <i data-lucide="map-pin"></i>
              Location
            </div>
            <div class="detail-value">Grand Hotel Ballroom</div>
          </div>
          <div class="detail-item">
            <div class="detail-label">
              <i data-lucide="users"></i>
              Guests
            </div>
            <div class="detail-value">50 people</div>
          </div>
        </div>

        <div class="products-section">
          <div class="products-header">
            <i data-lucide="shopping-bag"></i>
            Ordered Items
          </div>
          <div class="product-list">
            <div class="product-item">
              <div class="product-info">
                <div class="product-name">Grilled Ribeye Steak</div>
                <div class="product-quantity">Quantity: 50 plates</div>
              </div>
              <div class="product-price">$1,400.00</div>
            </div>
            <div class="product-item">
              <div class="product-info">
                <div class="product-name">Chocolate Lava Cake</div>
                <div class="product-quantity">Quantity: 50 servings</div>
              </div>
              <div class="product-price">$600.00</div>
            </div>
          </div>
        </div>

        <div class="quote-total">
          <div class="total-label">Final Total</div>
          <div class="total-amount">$2,000.00</div>
        </div>

        <div class="notes-section">
          <div class="notes-header">
            <i data-lucide="message-circle"></i>
            Chef's Response
          </div>
          <div class="notes-content">
            Your quote has been approved! We've applied a 10% discount for groups over 40 people. We'll contact you 3 days before the event to confirm final details. Looking forward to serving you!
          </div>
        </div>

        <div class="quote-actions">
          <button class="btn btn-primary" onclick="viewDetails(1)">
            <i data-lucide="eye"></i>
            View Full Details
          </button>
          <button class="btn btn-secondary" onclick="downloadPDF(1)">
            <i data-lucide="download"></i>
            Download PDF
          </button>
        </div>
      </div>

      <!-- Quote 2 - Pending -->
      <div class="quote-card">
        <div class="quote-header">
          <div class="quote-title">
            <div class="quote-id">Quote #QT-2024-002</div>
            <div class="quote-date">
              <i data-lucide="calendar"></i>
              Requested on November 8, 2024
            </div>
          </div>
          <span class="status-badge status-pending">
            <i data-lucide="clock"></i>
            Pending Review
          </span>
        </div>

        <div class="quote-details">
          <div class="detail-item">
            <div class="detail-label">
              <i data-lucide="calendar"></i>
              Event Date
            </div>
            <div class="detail-value">December 15, 2024</div>
          </div>
          <div class="detail-item">
            <div class="detail-label">
              <i data-lucide="map-pin"></i>
              Location
            </div>
            <div class="detail-value">Beach Club Resort</div>
          </div>
          <div class="detail-item">
            <div class="detail-label">
              <i data-lucide="users"></i>
              Guests
            </div>
            <div class="detail-value">20 people</div>
          </div>
        </div>

        <div class="products-section">
          <div class="products-header">
            <i data-lucide="shopping-bag"></i>
            Requested Items
          </div>
          <div class="product-list">
            <div class="product-item">
              <div class="product-info">
                <div class="product-name">Cuba Libre</div>
                <div class="product-quantity">Quantity: 20 servings</div>
              </div>
              <div class="product-price">$170.00</div>
            </div>
            <div class="product-item">
              <div class="product-info">
                <div class="product-name">Grilled Ribeye Steak</div>
                <div class="product-quantity">Quantity: 15 plates</div>
              </div>
              <div class="product-price">$420.00</div>
            </div>
            <div class="product-item">
              <div class="product-info">
                <div class="product-name">Chocolate Lava Cake</div>
                <div class="product-quantity">Quantity: 20 servings</div>
              </div>
              <div class="product-price">$240.00</div>
            </div>
          </div>
        </div>

        <div class="quote-total">
          <div class="total-label">Estimated Total</div>
          <div class="total-amount">$830.00</div>
        </div>

        <div class="notes-section">
          <div class="notes-header">
            <i data-lucide="info"></i>
            Your Notes
          </div>
          <div class="notes-content">
            We need vegetarian options for 3 guests. Also, please confirm if the cocktails can be made sugar-free for diabetic guests.
          </div>
        </div>

        <div class="quote-actions">
          <button class="btn btn-primary" onclick="viewDetails(2)">
            <i data-lucide="eye"></i>
            View Full Details
          </button>
          <button class="btn btn-secondary" onclick="editQuote(2)">
            <i data-lucide="edit"></i>
            Edit Request
          </button>
          <button class="btn btn-secondary" onclick="cancelQuote(2)">
            <i data-lucide="x-circle"></i>
            Cancel
          </button>
        </div>
      </div>

    </div>
  </div>

  <!-- Edit Modal -->
  <div id="editModal" class="edit-modal">
    <div class="edit-modal-content">
      <div class="edit-modal-header">
        <h3><i data-lucide="edit"></i> <span id="editModalTitle">Edit Quote</span></h3>
        <span class="close" onclick="closeEditModal()">&times;</span>
      </div>
      <div class="edit-modal-body">
        <form id="editForm">
          <div class="edit-form-group">
            <label for="editEventDate">Event Date *</label>
            <input type="date" id="editEventDate" required>
          </div>
          <div class="edit-form-group">
            <label for="editLocation">Location *</label>
            <input type="text" id="editLocation" required>
          </div>
          <div class="edit-form-group">
            <label for="editGuests">Number of Guests *</label>
            <input type="number" id="editGuests" min="1" required>
          </div>
          <div class="edit-form-group">
            <label for="editNotes">Additional Notes</label>
            <textarea id="editNotes" rows="4"></textarea>
          </div>
          <button type="submit" class="btn-save">
            <i data-lucide="save"></i>
            Save Changes
          </button>
        </form>
      </div>
    </div>
  </div>

  <script>
    const quotesData = {
      1: {
        id: 'QT-2024-001',
        status: 'Approved',
        requestDate: 'October 15, 2024',
        eventDate: 'November 25, 2024',
        location: 'Grand Hotel Ballroom',
        guests: 50,
        products: [
          { name: 'Grilled Ribeye Steak', quantity: 50, price: 28.00 },
          { name: 'Chocolate Lava Cake', quantity: 50, price: 12.00 }
        ],
        total: 2000.00,
        notes: "Your quote has been approved! We've applied a 10% discount for groups over 40 people. We'll contact you 3 days before the event to confirm final details. Looking forward to serving you!"
      },
      2: {
        id: 'QT-2024-002',
        status: 'Pending Review',
        requestDate: 'November 8, 2024',
        eventDate: 'December 15, 2024',
        location: 'Beach Club Resort',
        guests: 20,
        products: [
          { name: 'Cuba Libre', quantity: 20, price: 8.50 },
          { name: 'Grilled Ribeye Steak', quantity: 15, price: 28.00 },
          { name: 'Chocolate Lava Cake', quantity: 20, price: 12.00 }
        ],
        total: 830.00,
        notes: "We need vegetarian options for 3 guests. Also, please confirm if the cocktails can be made sugar-free for diabetic guests."
      }
    };

    function viewDetails(quoteId) {
      const quote = quotesData[quoteId];
      const productsList = quote.products.map(p => 
        `${p.name} (${p.quantity}x) - ${(p.price * p.quantity).toFixed(2)}`
      ).join('\n');
      
      alert(`Quote Details: ${quote.id}\n\nStatus: ${quote.status}\nEvent Date: ${quote.eventDate}\nLocation: ${quote.location}\nGuests: ${quote.guests}\n\nProducts:\n${productsList}\n\nTotal: ${quote.total.toFixed(2)}\n\nNotes:\n${quote.notes}`);
    }

    function editQuote(quoteId) {
      const quote = quotesData[quoteId];
      if (quote.status === 'Approved') {
        alert('Cannot edit an approved quote. Please contact us directly for changes.');
        return;
      }
      
      openEditModal(quote, quoteId);
    }

    let currentEditingQuoteId = null;

    function openEditModal(quote, quoteId) {
      currentEditingQuoteId = quoteId;
      
      // Pre-fill form
      document.getElementById('editModalTitle').textContent = `Edit Quote ${quote.id}`;
      
      // Convert date format
      const dateMatch = quote.eventDate.match(/(\w+) (\d+), (\d+)/);
      const months = {
        'January': '01', 'February': '02', 'March': '03', 'April': '04',
        'May': '05', 'June': '06', 'July': '07', 'August': '08',
        'September': '09', 'October': '10', 'November': '11', 'December': '12'
      };
      const dateValue = `${dateMatch[3]}-${months[dateMatch[1]]}-${dateMatch[2].padStart(2, '0')}`;
      
      document.getElementById('editEventDate').value = dateValue;
      document.getElementById('editLocation').value = quote.location;
      document.getElementById('editGuests').value = quote.guests;
      document.getElementById('editNotes').value = quote.notes;
      
      document.getElementById('editModal').classList.add('show');
      lucide.createIcons();
    }

    function closeEditModal() {
      document.getElementById('editModal').classList.remove('show');
      currentEditingQuoteId = null;
    }

    document.getElementById('editForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const quote = quotesData[currentEditingQuoteId];
      const newDate = new Date(document.getElementById('editEventDate').value);
      
      quote.eventDate = newDate.toLocaleDateString('en-US', { 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric' 
      });
      quote.location = document.getElementById('editLocation').value;
      quote.guests = parseInt(document.getElementById('editGuests').value);
      quote.notes = document.getElementById('editNotes').value;
      
      closeEditModal();
      alert('Quote updated successfully! The chef will review your changes.');
      location.reload();
    });

    // Close modal when clicking outside
    document.getElementById('editModal').addEventListener('click', function(e) {
      if (e.target === this) {
        closeEditModal();
      }
    });

    function cancelQuote(quoteId) {
      const quote = quotesData[quoteId];
      
      if (quote.status === 'Approved') {
        alert('Cannot cancel an approved quote. Please contact us directly.');
        return;
      }
      
      if (confirm(`Are you sure you want to cancel ${quote.id}?\n\nThis action cannot be undone.`)) {
        // Hide the cancelled quote
        const quoteCards = document.querySelectorAll('.quote-card');
        quoteCards[quoteId - 1].style.display = 'none';
        
        // Update statistics
        updateStats();
        
        alert(`Quote ${quote.id} has been cancelled successfully.`);
      }
    }
    function updateStats() {
      const visibleQuotes = document.querySelectorAll('.quote-card:not([style*="display: none"])').length;
      const pendingQuotes = Array.from(document.querySelectorAll('.status-pending')).filter(
        badge => badge.closest('.quote-card').style.display !== 'none'
      ).length;
      
      document.querySelector('.stats-cards .stat-card:nth-child(1) .stat-value').textContent = visibleQuotes;
      document.querySelector('.stats-cards .stat-card:nth-child(2) .stat-value').textContent = pendingQuotes;
      
      // Recalculate total
      let total = 0;
      document.querySelectorAll('.quote-card:not([style*="display: none"]) .total-amount').forEach(el => {
        const amount = parseFloat(el.textContent.replace('').replace(',', ''));
        total += amount;
      });
      document.querySelector('.stats-cards .stat-card:nth-child(4) .stat-value').textContent = `${total.toFixed(2)}`;
    }


    // Initialize Lucide icons
    lucide.createIcons();
  </script>
</body>
</html>